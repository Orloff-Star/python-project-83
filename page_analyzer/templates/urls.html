{% extends "base.html" %}
{% block content %}
    {% include "message.html" %}
    <main class="flex-grow-1">
        <div class="container-lg mt-3">
          <h1>Сайты</h1>
          <div class="table-responsive">
            <table class="table table-bordered table-hover text-nowrap" data-test="urls">
              <thead>
                <tr>
                  <th>ID</th>
                  <th>Имя</th>
                  <th>Последняя проверка</th>
                  <th>Код ответа</th>
                </tr>
              </thead>
              <tbody>
                {% for url in urls %}
                <tr>
                  <td> {{ url.id }} </td>
                  <td> 
                    <a href="{{ url_for('get_page_url', url_id=url.id) }}"> {{ url.name }} </a>
                  </td>
                  {% for url_check in url_checks %}
                    {% if url_check.url_id == url.id %}
                    <td>{{url_check.created_at}}</td>
                    <td>{{url_check.status_code}}</td>
                    {% endif %}
                  {% endfor %}
                </tr>
                {% endfor %}       
              </tbody>      
            </table>
          </div>
        </div>
      </main>
{% endblock %} 